HP OMEN RGB Keyboard Control Setup - Working Solution
======================================================

PROBLEM:
- HP Omen laptop RGB keyboard control not working with standard Linux hp-wmi module
- Need to install custom hp-omen-linux-module to control RGB zones
- Module failed to build with kernel 6.17.7-5-cachyos due to API changes

SOLUTION STEPS:
1. Clone the repository:
   git clone https://github.com/ranisalt/hp-omen-linux-module
   cd hp-omen-linux-module

2. Check available branches to find one compatible with your kernel:
   git branch -a
   # Look for branches matching your kernel version or newer

3. Switch to a more recent rebase branch:
   git checkout rebase-6.15  # Works for kernel 6.17.7

4. Remove old DKMS module (if exists):
   sudo dkms remove hp-omen-wmi/0.6.2 --all

5. Add the new module to DKMS:
   sudo dkms add .

6. Build and install the updated module:
   sudo dkms build hp-omen-wmi/0.6.15
   sudo dkms install hp-omen-wmi/0.6.15

7. Reload the module to make RGB zones available:
   sudo modprobe -r hp-wmi
   sudo modprobe hp-wmi

8. Verify the RGB zones are now available:
   ls -la /sys/devices/platform/hp-wmi/rgb_zones/
   # Should show zone00, zone01, zone02, zone03

USAGE:
To control the RGB zones:
- Zone 0: sudo bash -c 'echo RRGGBB > /sys/devices/platform/hp-wmi/rgb_zones/zone00'
- Zone 1: sudo bash -c 'echo RRGGBB > /sys/devices/platform/hp-wmi/rgb_zones/zone01'
- Zone 2: sudo bash -c 'echo RRGGBB > /sys/devices/platform/hp-wmi/rgb_zones/zone02'
- Zone 3: sudo bash -c 'echo RRGGBB > /sys/devices/platform/hp-wmi/rgb_zones/zone03'

Examples:
- Blue: sudo bash -c 'echo 0000FF > /sys/devices/platform/hp-wmi/rgb_zones/zone00'
- Red: sudo bash -c 'echo FF0000 > /sys/devices/platform/hp-wmi/rgb_zones/zone00'
- Cyan: sudo bash -c 'echo 00FFFF > /sys/devices/platform/hp-wmi/rgb_zones/zone00'

PERSISTENCE:
- Colors MAY persist after reboot (observed behavior can vary by system)
- The module WILL automatically load after reboot since it's installed via DKMS
- On some systems colors persist automatically, on others you may need to set them again
- To ensure colors are set automatically at boot, create a systemd service or startup script

TROUBLESHOOTING:
- If RGB zones don't appear, try: sudo modprobe -r hp-wmi && sudo modprobe hp-wmi
- Check your laptop is detected as HP Omen: sudo dmidecode -t system | grep -i "omen"
- Verify module loaded: lsmod | grep hp_wmi

DKMS automatically manages rebuilding the module on kernel updates, so this setup should continue working after kernel updates.